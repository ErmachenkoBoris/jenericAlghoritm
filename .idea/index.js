var myApp=function(t){var e={};function s(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(o,i,function(e){return t[e]}.bind(null,i));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";function o(t,e,s,o,i){this.radius=t,this.x=s,this.y=o,this.depth=e,this.color=i,this.children=0}s.r(e);function i(t,e){let s=10+30*Math.random(),i=Math.random()+Math.random();return new o(s,i,s+parseInt(Math.random()*(t-2*s)),s+parseInt(Math.random()*(e-2*s)),function(t,e){var s=!1;"#"==t[0]&&(t=t.slice(1),s=!0);var o=parseInt(t,16),i=(o>>16)+e;i>255?i=255:i<0&&(i=0);var r=(o>>8&255)+e;r>255?r=255:r<0&&(r=0);var n=(255&o)+e;n>255?n=255:n<0&&(n=0);return(s?"#":"")+(n|r<<8|i<<16).toString(16)}("#FFF3FE",i/.02*-2.4))}function r(t,e,s){this.name=t,this.color=e,this.purposeFunction=s}function n(t,e,s){return new r(t,e,s)}let h,a,c="map";let l,m=new Array;function u(t){c=t}function d(t,e,s,o,i){this.success=0,this.cost=s,this.extremumDistance=o,this.extremumDepth=i,t&&(this.x=t%h),e&&(this.y=e%a)}function f(t,e,s,o,i,r,n){for(this.name=n,h=i,a=r,this.pause=!1,this.size=t,this.ctx=o,this.finished=!1,this.extremums=s,this.members=[],this.colorGenes=e,this.generationNumber=0;t--;){let t=new d;t.random(),this.members.push(t)}this.oldValue,this.countFinish=0,l=a-100}d.prototype.x=0,d.prototype.y=0,d.prototype.extremumDistance=0,d.prototype.extremumDepth=0,d.prototype.random=function(){this.x=Math.random()*h,this.y=Math.random()*a},d.prototype.mutate=function(t){if(Math.random()>t||1==this.success)return;let e=!(Math.random()<=.5),s=Math.random()*h,o=Math.random()*a;e?(this.x=(this.x+s)%h,this.y=(this.y+o)%a):(this.x=Math.abs(this.x-s)%h,this.y=Math.abs(this.y-o)%a)},d.prototype.mate=function(t){let e=20*Math.random(),s=Math.random()<=.5?-1:1,o=this.x+s*e,i=t.y-s*e;return[new d(this.x,i),new d(o,t.y)]},d.prototype.calcCost=function(t,e){},f.prototype.calcCost=function(t,e){};let p=!0;f.prototype.display=function(){if(this.pause)return;let t=this.extremums.slice();if(t.sort((t,e)=>t.depth-e.depth),"map"!=c&&"Distance and Depth"==this.name){p&&(this.ctx.clearRect(0,0,canvas.width,canvas.height),p=!1),y(this.ctx);for(let t=0;t<this.members.length;t++)this.ctx.beginPath(),this.ctx.arc(100+Math.floor(.5*this.members[t].extremumDistance*m[1].cost),l-Math.floor(200*this.members[t].extremumDepth*m[0].cost),2+4*this.members[t].cost,0,2*Math.PI),this.ctx.fillStyle=this.colorGenes,this.ctx.fill(),this.ctx.stroke();this.drawResults(!1,c)}else{this.ctx.clearRect(0,0,canvas.width,canvas.height);for(let e=0;e<t.length;e++)this.ctx.beginPath(),this.ctx.arc(Math.floor(t[e].x),Math.floor(t[e].y),t[e].radius,0,2*Math.PI),this.ctx.fillStyle=t[e].color,this.ctx.fill(),this.ctx.stroke();for(let t=0;t<this.members.length;t++)this.ctx.beginPath(),this.ctx.arc(Math.floor(this.members[t].x),Math.floor(this.members[t].y),2,0,2*Math.PI),this.ctx.fillStyle=this.colorGenes,this.ctx.fill(),this.ctx.stroke();this.drawResults(!1,c)}},f.prototype.sort=function(){let t=0,e=0;for(let s=0;s<this.members.length;s++){t=-100,e=0;for(let o=s;o<this.members.length;o++)this.members[o].cost>t&&(t=this.members[o].cost,e=o);let o=new d(this.members[e].x,this.members[e].y,this.members[e].cost,this.members[e].extremumDistance,this.members[e].extremumDepth);this.members[e]=new d(this.members[s].x,this.members[s].y,this.members[s].cost,this.members[s].extremumDistance,this.members[s].extremumDepth),this.members[s]=new d(o.x,o.y,o.cost,o.extremumDistance,o.extremumDepth)}let s=new Array;s=this.members.filter((t,e)=>e<this.size),this.members=new Array,this.members=s},f.prototype.executing=!1,f.prototype.drawResults=function(t,e){if(!this.pause)if("map"==c||"map"!=c&&"Distance and Depth"!=this.name){if(t){this.ctx.clearRect(0,0,canvas.width,canvas.height);const t=this.extremums.slice();t.sort((t,e)=>t.depth-e.depth);for(let e=0;e<t.length;e++)this.ctx.beginPath(),this.ctx.arc(Math.floor(t[e].x),Math.floor(t[e].y),t[e].radius,0,2*Math.PI),this.ctx.fillStyle=t[e].color,this.ctx.fill(),this.ctx.stroke()}for(let t=0;t<m.length;t++)this.ctx.beginPath(),this.ctx.arc(Math.floor(m[t].x),Math.floor(m[t].y),4,0,2*Math.PI),this.ctx.fillStyle=m[t].color,this.ctx.fill(),this.ctx.stroke()}else{y(this.ctx);const t=m.length;this.ctx.beginPath(),this.ctx.arc(100+Math.floor(.5*m[t-1].extremumDistance*m[1].cost),l-Math.floor(200*m[t-1].extremumDepth*m[0].cost),2+4*m[t-1].cost,0,2*Math.PI),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.stroke()}},f.prototype.generation=function(){this.generationNumber++;for(let t=0;t<this.members.length;t++)this.members[t].cost<=0&&this.calcCost(this.members[t],this.extremums,m);if(this.sort(),this.display(),function(t,e){t&&t.length&&t[0].cost==e.oldValue&&e.countFinish++;if(e.countFinish>t.length/10)return!0;t&&t.length&&(e.oldValue=t[0].cost);return!1}(this.members,this))return function(t,e,s){let o=0,i=0,r=t.length/2,n=-1;for(let e=0;e<r;e++)if(t[e].cost>=n&&(n=t[e].cost,x.extremumDistance=t[e].extremumDistance,x.extremumDepth=t[e].extremumDepth,i+=t[e].x,o+=t[e].y),t[e].cost<n){r=e;break}if(x.x=i/r,x.y=o/r,x.cost=n,x.color=e,m[0]){const t=m[0].x,e=m[0].y;x.distance=Math.sqrt(Math.pow(Math.floor(t-x.x),2)+Math.pow(Math.floor(e-x.y),2))}x.depth=0,s.forEach(t=>{Math.sqrt(Math.pow(Math.floor(x.x-t.x),2)+Math.pow(Math.floor(x.y-t.y),2))<=t.radius&&x.depth<=t.depth&&(x.depth=t.depth)})}(this.members,this.colorGenes,this.extremums),m.push({...x}),this.drawResults(!0,c),this.finished=!0,p=!0,!0;for(let t=0;t<this.members.length/2;t+=2){let e=this.members[t].mate(this.members[t+1]);this.members.push(e[0]),this.members.push(e[1])}for(let t=0;t<this.members.length;t++)this.calcCost(this.members[t],this.extremums,m);this.sort();for(let t=this.members.length/2;t<this.members.length;t++)this.members[t].mutate(.7),this.calcCost(this.members[t],this.extremums,m);let t=this;this.pause||setTimeout((function(){t.generation()}),150)};let x={color:void 0,cost:-1,x:0,y:0,depth:0,distance:0};function y(t){t.fillStyle="black",t.strokeStyle="silver";for(let e=0;e<h;e+=50)for(let s=0;s<a;s+=50)t.strokeRect(e,s,50,50);for(let e=0;e<h;e+=50){if(400==e)return t.fillText("DISTANCE",100+e,l),void t.fillText("DEPTH",100,l-e);0==e?t.fillText(0,100,l):(t.fillText((e/.5).toFixed(1),100+e,l),t.fillText((e/200).toFixed(2),100,l-e))}t.lineWidth=1,t.strokeStyle="black",t.beginPath(),t.moveTo(100,0),t.lineTo(100,a),t.stroke(),t.beginPath(),t.moveTo(0,l),t.lineTo(h,l),t.stroke()}let b=10;let M=-1,g=.5,v=.5,w=[];function D(t,e,s){t.cost=0,e.forEach(e=>{Math.sqrt(Math.pow(Math.floor(t.x-e.x),2)+Math.pow(Math.floor(t.y-e.y),2))<=e.radius&&t.cost<=e.depth&&(t.cost=e.depth)})}function E(t,e,s){let o=Math.sqrt(Math.pow(Math.floor(t.x-s[0].x),2)+Math.pow(Math.floor(t.y-s[0].y),2));t.cost=-1,e.forEach(e=>{Math.sqrt(Math.pow(Math.floor(t.x-e.x),2)+Math.pow(Math.floor(t.y-e.y),2))<=e.radius&&(t.cost=o)})}function I(t,e,s){let o=0,i=0;t.cost=0;let r=Math.sqrt(Math.pow(Math.floor(t.x-s[0].x),2)+Math.pow(Math.floor(t.y-s[0].y),2));e.forEach(e=>{Math.sqrt(Math.pow(Math.floor(t.x-e.x),2)+Math.pow(Math.floor(t.y-e.y),2))<=e.radius&&(o=r)}),e.forEach(e=>{Math.sqrt(Math.pow(Math.floor(t.x-e.x),2)+Math.pow(Math.floor(t.y-e.y),2))<=e.radius&&i<=e.depth&&(i=e.depth)}),t.extremumDistance=o/s[1].cost,t.extremumDepth=i/s[0].cost,t.cost=v*(o/s[1].cost)+g*(i/s[0].cost)}function k(t,e){let s=!1;0===w.length&&(s=!0),(e||s)&&(w=function(t){let e=[];for(let s=0;s<t;s++)e.push(i(600,600));let s=-1,o=-1;return e.forEach((t,e)=>{t.depth>s&&(s=t.depth,o=e)}),e[o].color="black",e}(b)),function(t){let e=[];return t&&(e.push(n("Depth","#ff00fe",D)),e.push(n("Distance","#3d92f2",E))),e.push(n("Distance and Depth","#f2093b",I)),e}(e||s).forEach((e,s)=>{const o=new f(t[s],e.color,w,P,600,600,e.name);S.push(o),o.calcCost=e.purposeFunction,o.pause=!0}),function t(e){e>=S.length?C(S[e-1].name,m,!0):(S[e].finished||S[e].generationNumber||!S[e].pause?S[e].finished&&(C(S[e].name,m),e++):(S[e].pause=!1,M=e,S[e].generation()),setTimeout(()=>{t(e)},0))}(0),s=!1}let B=document.getElementById("canvas"),P=B.getContext("2d");B.setAttribute("width",600),B.setAttribute("height",600);let S=[];document.getElementById("start_button").addEventListener("click",()=>{if(S.length>0){S.some(t=>!t.finished)?T():_()}else{if(S&&S.length>0)return;let t=[];t.push(parseInt(document.getElementById("populateNumberFirst").value)),t.push(parseInt(document.getElementById("populateNumberSecond").value)),t.push(parseInt(document.getElementById("populateNumberThird").value));const e=b;b=parseInt(document.getElementById("extremumNumber").value);const s=document.getElementById("refreshExtremums").checked,o=+document.getElementById("adjust_first").value+ +document.getElementById("adjust_second").value;let i=document.getElementById("adjust_first").value/o,r=document.getElementById("adjust_second").value/o;g=r,v=i,console.log("wFirst ",g),console.log("wSecond ",v),(s||e!==b)&&R(),k(t,s||e!==b)}}),document.getElementById("pause_button").addEventListener("click",()=>{S.some(t=>!t.finished)?T():_()});let F=document.getElementById("viewMode");function T(){if(M>=0){const t=S[M].pause;S[M].pause=!t,t&&S[M].generation()}}function _(){S.forEach(t=>{t.pause=!0}),S=[]}F.addEventListener("change",()=>{F.checked?u("map"):u("dekart")});const j=['<i class="fas fa-adjust info_item"></i>','<i class="fas fa-ruler info_item"></i>','<div class="info_item"><i class="fas fa-ruler"></i>&ensp;<i class="fas fa-adjust"></i></div>'];function C(t,e,s){const o=function(t,e){switch(t){case"Depth":return 0;case"Distance":return 1;case"Distance and Depth":return e-1}newRules&&(purposes.push(n("Depth","#ff00fe",D)),purposes.push(n("Distance","#3d92f2",E)));purposes.push(n("Distance and Depth","#f2093b",I))}(t,e.length),i=document.createElement("tr");if(s){return void document.getElementById("info").appendChild(i)}document.getElementById("info_main").style.display="block",console.log("globalExtremums ",e);let r=e[o].depth.toFixed(2);0==r&&(r="-");let h=e[o].distance.toFixed(2);0==h&&(h="-");let a=o,c="",l="";a>2&&(a=2),a<2?(c="-",l="-"):(c=void 0,l=void 0),i.innerHTML="<td>"+j[a]+"</td><td>"+r+" c.u.</td><td>"+h+" c.u.</td><td>"+(c||g.toFixed(2))+"</td><td>"+(l||v.toFixed(2))+"</td>";document.getElementById("info").appendChild(i)}function R(){m=[],m=new Array,x={x:0,y:0,cost:0,color:void 0,depth:0,distance:0,extremumDistance:0,extremumDepth:0},M=-1,P.clearRect(0,0,B.width,B.height),document.getElementById("circleDepthAndDisctance").style.color="#f2093b",document.getElementById("circleDepth").style.color="#3d92f2",document.getElementById("circleDistance").style.color="#ff00fe"}document.getElementById("stop_button").addEventListener("click",()=>{_()}),R()}]);